<!doctype html>
<html class="no-js" lang="">

<head>
  <title>OpenBroker Trading Experience</title>
  <meta charset="utf-8">
<!--  <meta name="viewport" content="width=device-width, initial-scale=1">-->
  <link rel="stylesheet" href="app/css/main.css">
<!--  <meta name="description" content="">-->
<!--  <meta property="og:title" content="">-->
<!--  <meta property="og:type" content="">-->
<!--  <meta property="og:url" content="">-->
<!--  <meta property="og:image" content="">-->
<!--  <meta property="og:image:alt" content="">-->

<!--  <link rel="icon" href="/old/favicon.ico" sizes="any">-->
<!--  <link rel="icon" href="/old/icon.svg" type="image/svg+xml">-->
<!--  <link rel="apple-touch-icon" href="old/icon.png">-->
  <meta name="theme-color" content="#fafafa">
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>
  <link href="https://cdn.datatables.net/2.3.4/css/dataTables.dataTables.css" rel="stylesheet">
  <link href="app/js/datatables.min.css" rel="stylesheet">
  <script src="app/js/datatables.min.js"></script>

  <script type="module" src="app/js/openbroker.js"></script>
</head>

<body>

<noscript><h2 style="color: #ff0000">Seems your browser doesn't support Javascript! Websocket relies on Javascript being
  enabled. Please enable Javascript and reload this page!</h2></noscript>

<div id="main-content" class="main-style">

  <div class="grid">
    <div>
      OpenBroker Trading Experience
    </div>
    <div>
    <div id="logout_failure_message" class="warning">
    </div>
    <div id="logout-content" class="container">
      <input type="button" onclick="doLogout()" value="Logout" class="logout" />
    </div>
      </div>
  </div>

  <div style="height:10px"></div>
  <div>
    <div>
      <div>
      Place a new order
      </div>
      <div id="submit-data" class="container">
        <div class="col-md-12">
          <form>
            <label for="order_account">Account</label>
            <select name="order_account" id="order_account">
            </select>
            <label for="order_instrument">Instrument</label>
            <select name="order_instrument" id="order_instrument">
            </select>
            <label for="order_side">Side</label>
            <select name="order_side" id="order_side">
              <option value="buy">Buy</option>
              <option value="sell">Sell</option>
            </select>
            <label for="order_quantity">Quantity</label>
            <input id="order_quantity" size="3" required type="number" min="1"/>
            <label for="order_price" min="0.01">Price</label>
            <input id="order_price" required type="number"  min=".01"/>
            <input id="order_submit" type="button" value="Submit"/>
          </form>
        </div>
      </div>
    </div>
  <div style="height:50px"></div>
  <div>
    Accounts
  </div>
  <div id="account-data" class="col-md-6" hidden>
    <div class="row">
      <div class="col-md-12">
        <table id="accounts_table" class="table table-striped">
          <thead>
          <tr>
            <th class='right-align'>Account</th>
            <th class='right-align'>Name</th>
            <th class='right-align'>Nickname</th>
          </tr>
          </thead>
          <tbody id="accounts_body">
          </tbody>
        </table>
      </div>
    </div>

    <div style="height:50px"></div>
    <div>
      Market data
    </div>
    <div style="resize:vertical; max-width:1100px"  class="row">
      <div class="col-md-12">
        <table id="markets_table" class="table table-striped">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
    <div style="height:50px"></div>
    <div>
      Positions
    </div>
    <div class="row" style="resize:vertical;max-width:1100px">
      <div class="col-md-12 " >
        <table id="positions_table" class="table table-striped">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
    <div style="height:50px"></div>
    <div>
      Orders
    </div>
    <div class="row" style="resize:vertical;max-width:1100px">
      <div class="col-md-12">
        <table id="orders_table" >
          <thead>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>
  </div>

</div>
</div>
</body>
<script type="module" src="app/js/app.js"></script>
<script src="app/js/login.js"></script>
<script>

  function logoutCallback(status, _) {
    console.log("logoutCallback, status = " + status);
    if (status === 200) {
      console.log("redirecting to welcome page");
      window.location.href="/";
    }
    else {
      document.getElementById("logout_failure_message").innerHTML =
              "Your logout failed; please try again.";
    }
  }

  function doLogout() {
    console.log("doLogout");
    logout(logoutCallback);
  }
</script>
</html>
